<!doctype html><div class="lake-content" typography="classic"><p id="uefa2acc0" class="ne-p" style="text-align: left"><span class="ne-text" style="font-size: 16px; color: rgb(74, 74, 74)">允许在不重新创建 Pod 或重新启动容器的情况下改变资源，可以直接解决这个问题。此外，</span><strong><span class="ne-text" style="font-size: 16px; color: rgb(50, 109, 229)">原地 Pod 垂直伸缩</span></strong><span class="ne-text" style="font-size: 16px; color: rgb(74, 74, 74)">功能依赖于容器运行时接口（CRI）来更新 Pod 容器的 CPU 和/或内存的</span><span class="ne-text" style="font-size: 16px; color: rgb(74, 74, 74)"> </span><strong><span class="ne-text" style="font-size: 14px; color: rgb(50, 109, 229)">requests/limits</span></strong><span class="ne-text" style="font-size: 16px; color: rgb(74, 74, 74)">。</span></p><p id="u951af8fd" class="ne-p" style="text-align: left"><span class="ne-text" style="font-size: 16px; color: rgb(74, 74, 74)">当前的 CRI API 有一些需要解决的缺点：</span></p><ul class="ne-ul"><li id="uf74c7700" data-lake-index-type="0" style="text-align: left"><span class="ne-text" style="font-size: 16px; color: rgb(1, 1, 1)">UpdateContainerResources CRI API 需要一个参数来描述要为 Linux 容器更新的容器资源，这在未来可能无法适用于 Windows 容器或其他潜在的非 Linux 运行时。</span></li><li id="u4c595643" data-lake-index-type="0" style="text-align: left"><span class="ne-text" style="font-size: 16px; color: rgb(1, 1, 1)">没有 CRI 机制可以让 Kubelet 从容器运行时查询和发现容器上配置的 CPU 和内存限制。</span></li><li id="u7e7eca27" data-lake-index-type="0" style="text-align: left"><span class="ne-text" style="font-size: 16px; color: rgb(1, 1, 1)">处理 UpdateContainerResources CRI API 的运行时的预期行为没有很好地定义或记录。</span></li></ul><h3 id="DehNE" style="text-align: left"><span class="ne-text" style="color: rgb(50, 109, 229)">目标</span></h3><ul class="ne-ul"><li id="ue8d1daeb" data-lake-index-type="0" style="text-align: left"><span class="ne-text" style="font-size: 16px; color: rgb(1, 1, 1)">主要：允许更改容器的资源请求（requests）和限制（limits），而不必重新启动容器。</span></li><li id="u725666ba" data-lake-index-type="0" style="text-align: left"><span class="ne-text" style="font-size: 16px; color: rgb(1, 1, 1)">次要：允许参与者（用户、VPA、StatefulSet、JobController）决定在无法进行原地资源调整的情况下如何进行。</span></li><li id="uacd8fae9" data-lake-index-type="0" style="text-align: left"><span class="ne-text" style="font-size: 16px; color: rgb(1, 1, 1)">次要：允许用户指定哪些容器可以在不重启的情况下调整资源大小。</span></li></ul></div>